<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Polis Clicker: Rise of Ancient Greece</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f1ee;
      color: #333;
      text-align: center;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #d4af37;
      border: none;
      border-radius: 8px;
    }
    .resource, .building, .event, .tech, .victory {
      margin: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>Polis Clicker: Rise of Ancient Greece</h1>
  <div>
    <div class="resource">Food: <span id="food">0</span></div>
    <div class="resource">Wood: <span id="wood">0</span></div>
    <div class="resource">Stone: <span id="stone">0</span></div>
    <div class="resource">Drachmae: <span id="drachmae">0</span></div>
    <div class="resource">Favor of the Gods: <span id="favor">0</span></div>
  </div>
  <div>
    <button onclick="gatherFood()">Harvest Grain</button>
    <button onclick="chopWood()">Chop Wood</button>
    <button onclick="mineStone()">Mine Stone</button>
    <button onclick="tradeGoods()">Trade Goods</button>
    <button onclick="prayToGods()">Pray to the Gods</button>
  </div>
  <div>
    <h2>Build Your Polis</h2>
    <button onclick="buildAgora()">Build Agora (5 Wood, 10 Stone)</button>
    <button onclick="buildTemple()">Build Temple (10 Stone, 10 Favor)</button>
    <button onclick="buildAcademy()">Build Academy (20 Stone, 20 Drachmae)</button>
    <button onclick="buildTriremeDock()">Build Trireme Dock (15 Wood, 15 Stone)</button>
    <div class="building">Buildings Owned: <span id="buildings"></span></div>
  </div>
  <div class="tech">
    <h2>Technology Tree</h2>
    <button onclick="researchPhalanx()">Research Phalanx (10 Drachmae)</button>
    <button onclick="researchDemocracy()">Research Democracy (15 Drachmae, Academy required)</button>
    <div class="tech">Technologies Unlocked: <span id="technologies"></span></div>
  </div>
  <div class="event">
    <h2>Historical Event</h2>
    <button onclick="triggerEvent()">Trigger Random Event</button>
    <p id="eventOutput"></p>
  </div>
  <div class="victory">
    <h2>Victory Condition</h2>
    <button onclick="buildAcropolis()">Build the Acropolis (50 Stone, 30 Favor)</button>
    <p id="victoryOutput"></p>
  </div>
  <script>
    let food = 0, wood = 0, stone = 0, drachmae = 0, favor = 0;
    let buildings = [], technologies = [];

    function updateResources() {
      document.getElementById('food').innerText = food;
      document.getElementById('wood').innerText = wood;
      document.getElementById('stone').innerText = stone;
      document.getElementById('drachmae').innerText = drachmae;
      document.getElementById('favor').innerText = favor;
      document.getElementById('buildings').innerText = buildings.join(', ');
      document.getElementById('technologies').innerText = technologies.join(', ');
      saveGame();
    }

    function gatherFood() { food += 1; updateResources(); }
    function chopWood() { wood += 1; updateResources(); }
    function mineStone() { stone += 1; updateResources(); }

    function tradeGoods() {
      if (food >= 2 && wood >= 1) {
        food -= 2;
        wood -= 1;
        drachmae += 5;
      }
      updateResources();
    }

    function prayToGods() {
      if (stone >= 2) {
        stone -= 2;
        favor += 1;
      }
      updateResources();
    }

    function buildAgora() { if (wood >= 5 && stone >= 10) { wood -= 5; stone -= 10; buildings.push("Agora"); } updateResources(); }
    function buildTemple() { if (stone >= 10 && favor >= 10) { stone -= 10; favor -= 10; buildings.push("Temple"); } updateResources(); }
    function buildAcademy() { if (stone >= 20 && drachmae >= 20) { stone -= 20; drachmae -= 20; buildings.push("Academy"); } updateResources(); }
    function buildTriremeDock() { if (wood >= 15 && stone >= 15) { wood -= 15; stone -= 15; buildings.push("Trireme Dock"); } updateResources(); }

    function triggerEvent() {
      const events = [
        { text: "A neighboring polis asks for help. Send food? (-5 food, +5 favor)", action: () => { if (food >= 5) { food -= 5; favor += 5; } } },
        { text: "A philosopher questions the gods. Support or Silence? (+5 drachmae if Academy owned)", action: () => { if (buildings.includes("Academy")) drachmae += 5; } },
        { text: "Persian scouts spotted! Prepare the city? (-10 stone)", action: () => { if (stone >= 10) stone -= 10; } },
        { text: "Olympic Games hosted! (+10 favor if Temple owned)", action: () => { if (buildings.includes("Temple")) favor += 10; } }
      ];
      const event = events[Math.floor(Math.random() * events.length)];
      event.action();
      document.getElementById("eventOutput").innerText = event.text;
      updateResources();
    }

    function researchPhalanx() {
      if (drachmae >= 10 && !technologies.includes("Phalanx")) {
        drachmae -= 10;
        technologies.push("Phalanx");
        updateResources();
      }
    }

    function researchDemocracy() {
      if (drachmae >= 15 && buildings.includes("Academy") && !technologies.includes("Democracy")) {
        drachmae -= 15;
        technologies.push("Democracy");
        updateResources();
      }
    }

    function buildAcropolis() {
      if (stone >= 50 && favor >= 30) {
        stone -= 50;
        favor -= 30;
        document.getElementById("victoryOutput").innerText = "üèõ You have built the Acropolis! Your polis is legendary. üèõ";
        updateResources();
      }
    }

    function saveGame() {
      const gameState = { food, wood, stone, drachmae, favor, buildings, technologies };
      localStorage.setItem("polisClickerSave", JSON.stringify(gameState));
    }

    function loadGame() {
      const saved = JSON.parse(localStorage.getItem("polisClickerSave"));
      if (saved) {
        food = saved.food;
        wood = saved.wood;
        stone = saved.stone;
        drachmae = saved.drachmae;
        favor = saved.favor;
        buildings = saved.buildings;
        technologies = saved.technologies;
      }
    }

    loadGame();
    updateResources();
  </script>
</body>
</html>